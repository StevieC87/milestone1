<%- include('./includes/head.ejs') %>
</head>

<body>
<%- include('./includes/nav.ejs') %>

<style>
    /* .outerdiv {
    position: relative;
    width: 100%;
    } */
    .gridouter {
        display: flex;
		justify-content: center; /* horizontal center */
        align-items: center;
        position: relative;
        height: 400px;
    }
    .external {

    }
    .svg {
        position: absolute;
        width: 120px;
        height: 104px;
    }
  /*   .polygon:active {
        transition: transform 0.3s;
        transform: scale(0.9, 0.9);
        /(30px, 3px, 5);
    } */
    .polygon {
    
    }
    .clicktransform {
        transition: transform 0.3s;
        transform: scale(0.9, 0.9);
       
        /* //(30px, 3px, 5); */
    }
    .clicktransformtest {
        color: purple;
        background: yellow;
        text-decoration: line-through;
        transition: all 0.3s;
        transform: scale(0.9, 0.9);
    }
    .animate {
        
        animation-name: scaleanimation;
		animation-duration: 0.4s;
    }
    @keyframes scaleanimation {
		/* now anyrules we add here will apply to animation-name: square element */
		/* 0% {transform: rotatex(20deg);}
		25% {transform: rotateY(160deg);}
	    50% {transform: rotateY(200deg);}
		75% {transform: rotateY(240deg);}
		100% {transform: rotateY(360deg);} */
        0% {
            transform-origin: center;
            transform: scale(1,1);
        }
		25% {
            transform-origin: center;
            transform: scale(0.95,0.95);}
	    50% {
            transform-origin: center;
            transform: scale(0.9,0.9);}
		75% {
            transform-origin: center;
            transform: scale(0.95,0.95);}
		100% {
            transform-origin: center;
            transform:scale(1,1)}
    }

    .letter{
        font-size: 20pt;
        transform: translate(-8px);
        font-weight: bold;
    }
   /*  .svgg {
        height: 400px;
        width: 400px;
    } */
    .center {
       fill: #F6D921;

    }
    .outer {
        fill: #E6E6E6;
        
    }
    .svg:nth-child(1) {
    transform: translate(50%, 50%);
    }
    .svg:nth-child(2) {
    transform: translate(128%, 0%);
    }
    .svg:nth-child(3) {
    transform: translate(127%, 103%);
    }
    .svg:nth-child(4) {
    transform: translate(50%, 153%);
    }
    .svg:nth-child(5) {
    transform: translate(-27%, 101%);
    }
    .svg:nth-child(6) {
    transform: translate(-27%, -3%)
    }
    .svg:nth-child(7) {
    transform: translate(50%, -54%);
    }
    .letternoselect {
        user-select: none; 
    }
    
</style>
<%= word %><%=centerletter%>


<%=centerletter%>

<%= wordarray %>
 <!-- allmatchingwordsa  -->
 <!-- wordarray -->


<a href="#" id="shuffle" class="btn btn-primary" >shuffle</a>

<script>
        console.log('<%= allmatchingwordsa %>', 'ALL MATCHING WOOOOOOORDS!');
     // console.log(existingword1,'existingword1');
     //   console.log(object);
        console.log('<%= wordarray %>', 'word array ');

    function checkword(word) {
     
    }

    function shuffle(array) {
        let currentIndex = array.length,  randomIndex;

        // While there remain elements to shuffle.
        while (currentIndex != 0) {

            // Pick a remaining element.
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;

            // And swap it with the current element.
            [array[currentIndex], array[randomIndex]] = [
            array[randomIndex], array[currentIndex]];
        }

        return array;
        }
    document.querySelector('#shuffle').addEventListener('click', e => {
        
         let existingword1 = '<%= wordarray %>';
        console.log('<%= wordarray %>','existingword1');
        const existingwordtoarray = existingword1.split(',');
        let newarray = shuffle(existingwordtoarray);
    
        let lettersinpage = document.querySelectorAll('.letterouter');
        newarray.forEach(function(letter1, index) {

            document.querySelector(`#outerletter${index}`).textContent = letter1.toUpperCase();
        });

        e.preventDefault();
    })

    /* document.querySelector('#shuffle').addEventListener('click', e => {

    }); */
  
   
</script>

<script>
    const wordarray = '<%=wordarray%>';
    //const chars = word.split('');
   // console.log(chars);
   // document.getElementById('test').innerHTML = chars1;

</script>
<div id="test"></div>
<div class="outerdiv gridouter">
    <svg class="svg" id="svg9"> <!--  width="400" height="180" -->
        <polygon id="p9" class="polygon center"  points="0,51 30,0 90,0 120,51.9 90,103.9 30,103.9" stroke="white" stroke-width="2.5"></polygon>
        <text id="outerletter9" class="letter lettercentre letternoselect" x="50%" y="50%" dy="0.35em"><%=centerletter.toUpperCase()%></text>
    </svg>
    <svg class="svg" id="svg0"> <!--  width="400" height="180" -->
        <polygon id="p0" class="polygon outer"  points="0,51 30,0 90,0 120,51.9 90,103.9 30,103.9" stroke="white" stroke-width="2.5"></polygon>
        <text id="outerletter0" id="centerletter" class="letter letterouter letternoselect" x="50%" y="50%" dy="0.35em"><%=wordarray[0].toUpperCase()%></text>
    </svg>
    <svg class="svg" id="svg1"> <!--  width="400" height="180" -->
        <polygon id="p1" class="polygon outer"  points="0,51 30,0 90,0 120,51.9 90,103.9 30,103.9" stroke="white" stroke-width="2.5"></polygon>
        <text id="outerletter1" class="letter letterouter letternoselect" x="50%" y="50%" dy="0.35em"><%=wordarray[1].toUpperCase()%></text>
    </svg>
    <svg class="svg" id="svg2"> <!--  width="400" height="180" -->
        <polygon id="p2"  class="polygon outer"  points="0,51 30,0 90,0 120,51.9 90,103.9 30,103.9" stroke="white" stroke-width="2.5"></polygon>
        <text id="outerletter2" class="letter letterouter letternoselect" x="50%" y="50%" dy="0.35em" ><%=wordarray[2].toUpperCase()%></text>
    </svg>
    <svg class="svg" id="svg3"> <!--  width="400" height="180" -->
        <polygon id="p3"  class="polygon outer"  points="0,51 30,0 90,0 120,51.9 90,103.9 30,103.9" stroke="white" stroke-width="2.5"></polygon>
        <text id="outerletter3" class="letter letterouter letternoselect" x="50%" y="50%" dy="0.35em"><%=wordarray[3].toUpperCase()%></text>
    </svg>
    <svg class="svg" id="svg4"> <!--  width="400" height="180" -->
        <polygon id="p4" class="polygon outer"  points="0,51 30,0 90,0 120,51.9 90,103.9 30,103.9" stroke="white" stroke-width="2.5"></polygon>
        <text id="outerletter4" class="letter letterouter letternoselect" x="50%" y="50%" dy="0.35em"><%=wordarray[4].toUpperCase()%></text>
    </svg>
    <svg class="svg" id="svg5"> <!--  width="400" height="180" -->
        <polygon id="p5" class="polygon outer"  points="0,51 30,0 90,0 120,51.9 90,103.9 30,103.9" stroke="white" stroke-width="2.5"></polygon>
        <text id="outerletter5" class="letter letterouter letternoselect" x="50%" y="50%" dy="0.35em"><%=wordarray[5].toUpperCase()%></text>
    </svg>
    
    
</div>
<!-- <svg width="400" height="180">
    <rect x="80" y="20" width="150" height="150" style="fill:blue;stroke:pink;stroke-width:5;fill-opacity:0.1;stroke-opacity:0.9" />
    Sorry, your browser does not support inline SVG.  
  </svg> -->


  <!-- <div class="gridouter">
        <div class="external" > --><!-- style="height: 400px; width: 400px" -->

                            <!--             <polygon points="25 0,75 0,100 50, 75 100, 25 100, 0 50" style="fill:lightgray;stroke:purple;stroke-width:0" /> -->
     <!-- class="cell-fill" -->
                            <!--  <polygon class="hegaxon center" points="0,51.96152422706631 30,0 90,0 120,51.96152422706631 90,103.92304845413263 30,103.92304845413263" stroke="white" stroke-width="2.5"></polygon> -->
<!--        
    

        </div>
</div> -->

<script>
    //otherwise try with docum,ent click event listener
  /*    document.querySelector('polygon').addEventListener('click', e => {
        alert('hello');
        console.log('asdfladjflka');
        let polygonindex = e.target.id;
        polygonindex.ClassList.add('clicktransform');
    }) */

    document.addEventListener('click', e => {
        console.log(e, 'event');
        console.log(e.target.tagName, 'e.target.tagName');
        console.log(e.target.id, 'e.target.id');
        let clicktag = e.target.tagName;
        let clickid = e.target.id; //this is also the array index
        //now if we click on polygon
        let clickidconcat = '#' + clickid;
        if(clicktag == 'polygon' || clicktag == 'TEXT'){
                console.log('clicked', clicktag);
            //let polygonindex = e.target.id;
            document.querySelector(`#${clickid}`).classList.add('animate');
     
            let newnumberonly = clickid.charAt(clickid.length-1);


           let letterindex = `outerletter${newnumberonly}`;
           console.log(letterindex,'letterindex');
    //    document.querySelector('#outerletter'+newnumberonly).classList.add('animate');
//works   document.querySelector('#outerletter'+newnumberonly).classList.add('clicktransformtest');
            //now we need to get the letter from the array
        } //  document.querySelector
    })
</script>